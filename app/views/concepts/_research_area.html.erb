<style tyle="text/css">
  DIV
  {
    vertical-align: top;
  }

  .ra-header
  {
    font-size: 3em;
    margin: 1em 0;
  }

  .data-container
  {
    position: relative;
    display: inline-block;
  }

  .data-container .data-rows
  {
    position: relative;
    display: block;
    height: 225px;
    overflow-y: scroll;
    border-width: 0 1px 1px;
    border-style: solid;
    border-color: #FFFFFF;
  }

  .data-container .data-rows .data-row
  {
    position: relative;
    display: block;
    padding: 6px 4px;
    overflow-x: hidden;
    white-space: nowrap;
    background: #edf8ff;
    border-bottom: 1px solid #999999;
    cursor: pointer;
  }

  .data-container .data-rows .data-row:nth-child(even)
  {
    background: #cddfeb;
  }

  .data-container .data-rows .data-row.inactive
  {
    color: #999999;
    background: #EEEEEE;
    border-bottom: 1px solid #CCCCCC;
  }

  .data-container .data-rows .data-row.inactive:nth-child(even)
  {
    background: #DDDDDD;
  }

  .data-container .data-rows .data-row:hover
  {
    background: #ffc78b !important;
  }
</style>

<div>

<div class="ra-header"><%= @research_area.name %></div>

<div class="data-container three-col publications color-1">
  <h3>Publications (<%= @selected_publications.length %>)</h3>
  <div class="data-rows">
    <% @selected_publications.each do |publication| %>
      <div class="data-row" model_id="<%= publication.id %>"><%= publication.name %></div>
    <% end %>
    <% @publications.each do |publication| %>
      <div class="data-row inactive" model_id="<%= publication.id %>"><%= publication.name %></div>
    <% end %>
  </div>
</div>

<div class="data-container three-col researchers color-2">
  <h3>Researchers (<%= @selected_researchers.length %>)</h3>
  <div class="data-rows">
    <% @selected_researchers.each do |researcher| %>
      <div class="data-row" model_id="<%= researcher.id %>"><%= researcher.name %></div>
    <% end %>
    <% @researchers.each do |researcher| %>
      <div class="data-row inactive" model_id="<%= researcher.id %>"><%= researcher.name %></div>
    <% end %>
  </div>
</div>


<div class="data-container venues color-3">
  <h3>Venues (<%= @selected_venues.length %>)</h3>
  <div class="data-rows">
    <% @selected_venues.each do |venue| %>
      <div class="data-row" model_id="<%= venue.id %>"><%= venue.name %></div>
    <% end %>
    <% @venues.each do |venue| %>
      <div class="data-row inactive" model_id="<%= venue.id %>"><%= venue.name %></div>
    <% end %>
  </div>
</div>

<div class="data-container departments color-4">
  <h3>Departments (<%= @selected_departments.length %>)</h3>
  <div class="data-rows">
    <% @selected_departments.each do |department| %>
      <div class="data-row" model_id="<%= department.id %>"><%= department.name %></div>
    <% end %>
    <% @departments.each do |department| %>
      <div class="data-row inactive" model_id="<%= department.id %>"><%= department.name %></div>
    <% end %>
  </div>
</div>

<div class="data-container grants color-5">
  <h3>Grants (<%= @selected_grants.length %>)</h3>
  <div class="data-rows">
    <% @selected_grants.each do |grant| %>
      <div class="data-row" model_id="<%= grant.id %>"><%= grant.title %></div>
    <% end %>
    <% @grants.each do |grant| %>
      <div class="data-row inactive" model_id="<%= grant.id %>"><%= grant.title %></div>
    <% end %>
  </div>
</div>

<div class="data-container patents color-6">
  <h3>Patents (<%= @selected_patents.length %>)</h3>
  <div class="data-rows">
    <% @selected_patents.each do |patent| %>
      <div class="data-row" model_id="<%= patent.id %>"><%= patent.title %></div>
    <% end %>
    <% @patents.each do |patent| %>
      <div class="data-row inactive" model_id="<%= patent.id %>"><%= patent.title %></div>
    <% end %>
  </div>
</div>
<div>

<script type="text/javascript">
  function resetDetailParams() {
    $("INPUT[name='publication_id']").val("");
    $("INPUT[name='researcher_id']").val("");
    $("INPUT[name='department_id']").val("");
    $("INPUT[name='venue_id']").val("");
    $("INPUT[name='grant_id']").val("");
    $("INPUT[name='patent_id']").val("");
  }

  $(document).ready(function() {
    // Publications
    $(".data-row", $(".data-container.publications")).click(function() {
      resetDetailParams();

      var id = $(this).attr("model_id");
      $("INPUT[name='publication_id']").val(id);
      loadDetailsData();
    });

    // Researchers
    $(".data-row", $(".data-container.researchers")).click(function() {
      resetDetailParams();

      var id = $(this).attr("model_id");
      $("INPUT[name='researcher_id']").val(id);
      loadDetailsData();
    });

    // Departments
    $(".data-row", $(".data-container.departments")).click(function() {
      resetDetailParams();

      var id = $(this).attr("model_id");
      $("INPUT[name='department_id']").val(id);
      loadDetailsData();
    });

    // Venues
    $(".data-row", $(".data-container.venues")).click(function() {
      resetDetailParams();

      var id = $(this).attr("model_id");
      $("INPUT[name='venue_id']").val(id);
      loadDetailsData();
    });

    // Grants
    $(".data-row", $(".data-container.grants")).click(function() {
      resetDetailParams();

      var id = $(this).attr("model_id");
      $("INPUT[name='grant_id']").val(id);
      loadDetailsData();
    });

    // Patents
    $(".data-row", $(".data-container.patents")).click(function() {
      resetDetailParams();

      var id = $(this).attr("model_id");
      $("INPUT[name='patent_id']").val(id);
      loadDetailsData();
    });
  });
</script>
